//<![CDATA[

   var map;
   function writegmarker(lng,lat,gallerylink) {
        var marker = new GMarker( new GLatLng(lng,lat) );
                GEvent.addListener(marker, 'click', function(){
                marker.openExtInfoWindow(
                  map,
                  "map_marker",
                  controllerlink(gallerylink),
                  {beakOffset: 3}
                );
              });
        map.addOverlay(marker);
   }

    function writepolyline(encpts,enclvl) {
    var encodedPolyline = new GPolyline.fromEncoded({
                color: "#FF0000",
                weight: 5,
                points: encpts,
                levels: enclvl,
                zoomFactor: 32,
                numLevels: 4
        });
        map.addOverlay(encodedPolyline);
      }
    


    function otfjson(markerlist) {
        for (var i=0; i<markerlist.length; i++) {
            writegmarker(markerlist[i].lat,markerlist[i].lon,markerlist[i].gal)
	    writepolyline(markerlist[i].encpts,markerlist[i].enclvl)
        }
    }

   function showGallery(gallerylink) {
        new Ajax.Request(gallerylink, {onSuccess: function(response) { document.getElementById('gallery').innerHTML = response.responseText; }});
        }


   function controllerlink(gallerylink) {
        return '<a href="javascript:showGallery(\''+gallerylink+'\')">gallery</a>';
   }
   function load() {
      if (GBrowserIsCompatible()) {
        map = new GMap2(document.getElementById("map"));
        map.setCenter(new GLatLng('48.1963808', '16.3647328'), 13);
        map.setMapType(G_PHYSICAL_MAP);
        map.addControl(new GScaleControl());
        map.addControl(new GLargeMapControl());
        var mapControl = new GHierarchicalMapTypeControl();
        map.addMapType(G_PHYSICAL_MAP);
        mapControl.addRelationship(G_SATELLITE_MAP, G_HYBRID_MAP, "Labels", false);
        map.addControl(mapControl);
        map.addControl(new GOverviewMapControl ());
        map.enableScrollWheelZoom();
	var markerlist = [{'lat':48.1963808, 'lon':16.3647328, 'gal':"gallery/6", 'encpts':"}lv~G_roeAAEp@rAf@n@`@ZENCEa@UQU{A{@a@[a@Sg@Oi@Ig@Fg@Ve@Kc@KOKa@OwAiAi@Ic@i@Q]G]HBI?DCGa@[a@Dy@_@oA[_@E]g@[MQ][k@GO]m@SWUQ]kAm@k@SaAe@s@ZWl@}@p@gA^[VO~@QZ_@lAc@Rq@eAYk@g@i@Yo@o@}@_AiCa@oA_@u@Mi@OY@q@Cw@a@_AKNLKOSB?k@a@y@iAH`@Bp@Pd@]OOOAE@@ABCCe@i@Ey@OPSrAEICq@AuAK[ENIf@[fA[\\Ww@AeBMiAOi@Ew@Ai@@k@E_@YaAWSG\\Eh@WKUe@@A?@UWS]WCe@F{@Fs@[w@wAa@_AMQUQQc@QWMe@GCOy@O]Is@CT?n@Wf@Qk@Ks@?D@E?BE\\U^Kv@KBD??E_@Se@y@Co@Jq@A_@ABBs@E[BBABEQWGD?ETEf@_@pAG^UR?|@InAG^YNYJ_@?]W_@a@gAGSOg@MOKI\\CBC?EJm@d@GYBcCEe@Ig@S_@Oi@Q[Ao@@c@Gy@D[B_@A[QWUKEk@G_@cAiAE?CIB?c@K_@?YK[QM_@wAa@w@]@[BDMMBAFFABWBWOo@cA[o@YQW]Ie@Ao@Km@SJKOUSUDOL[DMSYWOPWg@EDD@GBGq@SW@HOU[Sg@oAWYU}BEcAYm@A}@JiB?m@KcDQqACo@PyC^yAHo@DKDG?@ITGCG}AG_@Si@@B?Cg@s@e@cAOc@CWNw@K}@ABM@Om@YTMDMASHI?OHIIOmA@a@?}@GWD?ADKoAESGFOH@@?GCn@KCS@OJALC@FXDA@EH@ECFF?BKCFARyARQb@xA@bBZh@l@h@z@m@A~AO|AWtAbBPN|@EzAh@rAXHKzAi@vAFlAPxAVvALxA@CEJ@E?zAExA`@jARzA@hBL`Bz@bAFf@f@IbAFvAB\\zATUFdAKRHVBT`AdAt@pAbDbBx@h@pAd@nAj@l@nAf@nADdB?~AVvARbDLQBd@EnBH|A~@oAbA}@pANdAZx@oA@{Ao@cAh@SE}Ah@EzAi@?PZI?BEE@b@BCE??AE^FQYIDCLZGKC?UzAG`Bx@jAz@fANxAb@tAVMC?DKG_Ba@_B`@yAj@x@b@xAp@jAn@pA`AfAVbAd@LTyAN?~AzAFISCLh@z@DTg@\\tA?zATxAZ`B?dBbA{@f@sAC~AHzA^yAf@xAh@b@MgBd@l@fAv@@FIGBVC?JE?MMXDA?CB@?BAALg@Kj@C?BODFBE[NVQE??Gb@tADzAbApAb@rAn@zAfAnDbAfAf@xAbAgAb@uALg@zAaACAjAu@rA_@dAz@jAn@zA`@z@dA`A~@pAt@x@tA^tAlA|@lAt@LhB|ACvAm@@zAtA\\bAhAdCn@BKsA{AWq@?K?BD?_@CP@BDOH?LBK?MB@A^bAr@n@`AN^@EDBAOBJEGc@K@?w@o@i@Y_@q@{@As@c@SF_A@WLe@Qs@QaC}AcAu@Mk@QUIi@Bo@YID_A]YO[SUc@WOEDHAADCC@CCCOc@Ju@DUKSDIk@EDSDYEMa@QE_@@AMQFSSAFCGWf@MDQLI?Wl@WTMTKBGNDCn@\\K`@[p@HJCXBXMl@DLGf@@h@DORENBFVSh@PFKt@XPEb@DL@\\IVMJKEEFQDWPGAe@LUPc@j@ANHn@^UCBBHKOHn@IFEAFI?x@VRHRNl@Hj@WXC?s@`@QTNRZHJZKj@IRTLH`@FjA?d@AJGB]AQHC\\F^@TEp@GPYJUEKHs@CUMSJQAAAOB@CDNTZEj@Nx@Kf@W?SKs@SUB]NVNDD@HACDFETJ^Hx@G`@aAL@KIFFN?TcACDj@A|AMHq@Fg@`@OTK^C\\COHDE?@Ac@hEAXOjB[xAg@jCi@tBq@jBm@jA_BtDg@bAC?DAsD`GJKCASABBKb@iB~CCb@B|@Ap@CXORSA@H@TPt@QXS?MEGI?NEXYt@DH[MLPFMCGANJUMP}AxAs@zAITFAACGJSf@K`@g@jDWxBIb@SZuAtA[^_BdCUP[`@Qb@q@t@ONBAG@B@AC@A?DYl@yCfE]\\Y^Ud@k@hBaA|BQLMM@BYHo@rAWHSBs@ZOBBRFP?RGFWd@MNSJQP]x@k@v@c@t@G\\Eh@IZ@b@Ev@CXGLPAR?DBELARf@GJBG`AGZOTEVIX?AB@Qt@Cf@@xAB`@N^RRl@Vd@JPJ\\Ld@HHAEGA?GIWQABEBH@TPNFn@r@DCCA@CL@IB?Fc@g@[e@C_@A@?E@p@a@SAK?FBA@BBFi@G_A_Aw@gAoAo@k@oAs@oAe@gA\\m@pAg@@aBXaBj@mAXRnAu@F}ApAo@?}@NyAv@oARQxAKrAiAj@sA^}A`AgA~@oAv@mAn@wA@@`A_AjA}@|@eAfCgCp@_AV_Ep@}D^_@AcBrAy@pAs@?aAf@kAj@_Aj@uA`@yAd@yAPiAp@qAz@oAhA_AX_B`@uAp@uATw@h@uA`AeAL{ATS?AE?@DGg@NwA^}A|@eAc@{AUwAdA}@e@yAB}AlAi@g@qAhAw@lCh@?SXZR^?NGGC@BEBfAIv@LhE|@~@l@zAZ|ApAh@l@pAhA~@DSe@}AXaB_@uAMcBo@sAxAj@bAdAZYHaB[yAsAi@WaBpAh@LyASaBa@aBM_B`@cBT_B[aBOwAc@{AcAk@}AAwAQ{A[}A@uA_@eA}@qA_AWU|AAxAh@zAQ`BG|A[xAs@pA{@VaBL]rAm@zAXr@vAb@pAdAv@`AdAl@nAf@xAp@lAf@pAjAz@r@vAQ{Aw@uAY}A]wA@cBE{Ae@yA}@gAYwAp@eHQ_BqAmDs@sAiA}BwAk@}AE}A^]`@ETa@t@Ch@St@YTi@}@o@_Bq@g@Km@i@m@i@iBg@w@Kq@_@{@Uu@@[A}@Iu@a@{@ML@IRVQTCSMJ`@q@Cf@MXHOB?DEXvAf@bBn@xArA~Dl@lA~@|CnAn@t@mAx@kAlA}@z@qAlAk@|AFvAn@xAf@hAz@z@bAf@jBf@vAl@pAnAbAhAbAlAr@|Dl@pAn@`A~@fAz@DRRg@i@k@c@k@_@y@GCGD?FOC", enclvl:"B????@???????????????@???????????@??????????@????????@????????????????@?@??????????@?@???@???@????????@????????????@??????????@????@??????@????????????@?????????@????????@????@????????????????@??????????????????@??????@????????@??????????@????????@?????@????????????@?????????@???????@??????????@????????A???@?@??@@???@?@????????????@?@??@???????@???@?????????@?@?@????@???@??????????????@???@?????@?????@??@???@?@????@?@?@@?@@??????????????@????????????????@??????@?????@????@?@@??@?????@???????????????A??????????@???@????????????????@???????????????@???????@??????????????????????@?????????@??????????????@???@???????@????????@??????????@????@????@????????@?????@?@???@???????????@????????????@????????@????????????????@????????@?????????????????????@???????????????????@?????????????@????????????A???????????????????@?????????????????@??@???????????@??@???????????@???@?@???????????????@????????@????@??@??@???????@??????@????@?@?@??@@@???????@????@???@????@???@?@?????????@????????@@?@?@?@??????@???????????????A???????????????@@???@?@??@?????@?????@???????B"}];
	otfjson(markerlist);
      }
    }

    //]]>
